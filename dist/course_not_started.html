<!DOCTYPE html>
<html lang="ru">
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Personal security</title>
  <script defer src="app.js"></script><link href="app.css" rel="stylesheet"></head>
    <body>
      <div class="container container-safety">
        <section class="navigator">
          <div class="nav_logo">
            <a class="nav_logo-link" href="/"><img id="nav_logo" src="./images/logo_small.svg" alt="Personal security"></a>
          </div>
          <ul class="nav_list">
            <li class="nav_item active"><a href="/">Тренировки</a></li>
            <li class="nav_item"><a href="theory.html">Теория</a></li>
            <li class="nav_item"><a href="situation.html">Ситуации</a></li>
          </ul>
          <div class="nav_list menu__wrapper">
            <div class="nav_el nav_menu nav_menu-btn" id="nav-menu-mob">
                <svg class="icons icons--menu" width="20" height="20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <use xlink:href="sprite.svg#icon-menu"></use>
                </svg>
            </div>
            <div class="nav_list nav_list-menu hide" id="menu-nav">
              <div class="nav_el nav_search" id="open-search-btn">
                <svg class="icons icons--search" width="24" height="24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                   <use xlink:href="sprite.svg#icon-search"></use>
                </svg>
                <div class="nav_list-text">Поиск</div>
              </div>
              <a class="nav_el nav_profile" href="profile.html">
                <svg class="icons icons--profile" width="24" height="24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                   <use xlink:href="sprite.svg#icon-profile"></use>
                </svg>
                <div class="nav_list-text">Аккаунт</div>
              </a>
            </div>
          </div>
          <div class="search-panel hide" id="search-panel">
            <div class="search-input_wrapper">
              <input type="text" class="search__input" placeholder="Поиск" id="search_input">
              <div class="search-btn" id="search-btn">
                <svg class="icons icons--search" width="24" height="24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                   <use xlink:href="sprite.svg#icon-search"></use>
                </svg>
              </div>
            </div>
            <div class="search-panel-close" id="close-search-btn">
              <svg class="icons icons--close" width="20" height="20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                 <use xlink:href="sprite.svg#icon-close"></use>
              </svg>
            </div>
          </div>
        </section>

        <section class="content content-course">
          <div class="descr">
            <div>
              <h1>Персональная тренировка</h1>
              <div class="content-descr">Все уроки lorem вот одна из задачек с этого экзамена. Её задавали на экзамене 2019 года. На рисунке вы видите треугольник. Также известна длина некоторых частей треугольника.</div>
            </div>
            <div>
              <img class="descr-img" src="./images/safety_img.png" alt="Цифровая безопасность">
            </div>
          </div>
          <div class="test_wrapper">
            <div class="test_inner">
              <div class="progress_test">
                <div class="block_return">
                    <svg class="icons icons--return" width="44" height="24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                       <use xlink:href="sprite.svg#icon-return"></use>
                    </svg>
                </div>
                <div class="progress_line"><div class="progress_question"></div></div>
              </div>

              <div class="block_question">
                  1
              </div>
              <div class="block_question hide">
                  2
              </div>
              <div class="block_question hide">
                  3
              </div>
              <div class="block_question hide">
                  4
              </div>
              <div class="block_question hide">
                  5
              </div>
              <div class="block_question hide">
                  6
              </div>

              <div class="btn btn-next">Дальше</div>

            </div>

          </div>

          <div class="threats threats-not-ready">
            <h3>С этими угрозами вам предстоит разобраться</h3>
            <div class="content-descr"> Пройдите тест чтобы мы смогли предложить вам курс тренировок , понять с какими опасностями вы можете столкнуться и как порекомендовать, как с нимим правляться.</div>
            <div class="materials materials-threats">
              <div class="material">
                <div class="material-list">
                  <div class="material-el">
                    <div class="img">
                      <img src="./images/img_example/image_1.png" />
                    </div>
                    <h5>Двухэтапный вход Двухэтапный вход</h5>
                  </div>
                  <div class="material-el">
                    <div class="img"></div>
                    <h5>Трехэтапный вход</h5>
                  </div>
                  <div class="material-el">
                    <div class="img"></div>
                    <h5>Четырехэтапный вход</h5>
                  </div>
                  <div class="material-el">
                    <div class="img"></div>
                    <h5>Пятиэтапный вход</h5>
                  </div>
                  <div class="material-el">
                    <div class="img"></div>
                    <h5>Шестиэтапный вход</h5>
                  </div>
                  <div class="material-el">
                    <div class="img"></div>
                    <h5>Шестиэтапный вход</h5>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>


      <footer>
        <div class="footer footer-main">
          <div class="footer_logo">
            <a class="footer_logo-link" href="/"><img src="./images/logo_small.svg" alt="Personal security"></a>
          </div>
          <ul class="footer_list">
            <li class="footer_item"><a href="about.html">О проекте</a></li>
            <li class="footer_item"><a href="/">Предложить новость</a></li>
          </ul>
        </div>
      </footer>
      <script>


      let arrQuestions = $(".block_question") // весь список вопросов
      let activeQuestion = 0 // активный сейчас вопрос. 0 по умолчанию
      let btnNext = $(".btn-next")
      let btnReturn = $(".block_return")
      let progressLine = $(".progress_line") // вся линия
      let widthProgressLine = progressLine.width() // вся линия

      let progressTest = $(".progress_question") // закрашенная линия в зависимости от номера выбранного вопроса
      let widthProgressQuestion = widthProgressLine / arrQuestions.length

      function setProgress () {
        let width = (activeQuestion + 1) * widthProgressQuestion
        progressTest.css("width", width + "px")
      }

      btnNext.on("click", function (e) {
        e.stopPropagation();
        if (activeQuestion >= (arrQuestions.length - 1)) {
          var url = "course_ready.html";
          $(location).attr('href',url);
        }
        if (activeQuestion < (arrQuestions.length - 1)) {
          arrQuestions.eq(activeQuestion).addClass("hide");
          activeQuestion += 1;
          arrQuestions.eq(activeQuestion).removeClass("hide");
          if (activeQuestion == (arrQuestions.length - 1)) {
            btnNext.text("Готово")
          }
        }
        setProgress()
      })

      btnReturn.on("click", function (e) {
        e.stopPropagation();
        if (activeQuestion > 0) {
          arrQuestions.eq(activeQuestion).addClass("hide");
          activeQuestion -= 1;
          arrQuestions.eq(activeQuestion).removeClass("hide");
          if (activeQuestion != (arrQuestions.length - 1)) {
            btnNext.text("Дальше")
          }
          setProgress()
        }
      })

      setProgress()

      $(window).on("resize", function (e) {
        widthProgressLine = progressLine.width() // вся линия
        widthProgressQuestion = widthProgressLine / arrQuestions.length
        setProgress();
      })


      </script>
    </body>
</html>
